package Localization;

use strict;
use warnings;
use utf8;

use parent ("Exporter");

my %strings = (
	"English" => {
		"na"                                  => "N/A",

		"datetime_format"                     => "%%d %%b %%H:%%M",
		"contact_format"                      => "‚ñ∂ %s %s\nüìû %s",

		"span_regexp"                         => qr/(?:[^\d\s]+\s+)?([^\d\s,]+)(?:(?:\s*,\s*)|(?:\s+))([^\d\s]+)\s+(\d+)(?:[:.-](\d+))?(?:\s+[^\d\s]+\s+(\d+)(?:[:.-](\d+))?)?/i,
		"today"                               => "today",
		"tomorrow"                            => "tomorrow",

		"monday_re"                           => qr/mon(?:day)?/i,
		"tuesday_re"                          => qr/tue(?:sday)?/i,
		"wednesday_re"                        => qr/wed(?:nesday)?/i,
		"thursday_re"                         => qr/thu(?:rsday)?/i,
		"friday_re"                           => qr/fri(?:day)?/i,
		"saturday_re"                         => qr/sat(?:urday)?/i,
		"sunday_re"                           => qr/sun(?:day)?/i,

		"at_re"                               => qr/at/i,
		"until_re"                            => qr/until/i,

		"30_min"                              => "30 minutes",
		"1_hour"                              => "1 hour",
		"2_hours"                             => "2 hours",
		"3_hours"                             => "3 hours",

		"booked_by"                           => "Booked by %s",

		"back"                                => "‚¨ÖÔ∏è Back",
		"cancel"                              => "‚ùå Cancel",
		"operation_cancelled"                 => "‚ùå Operation cancelled",

		"user_start"                          => "Hello! I am booking bot",
		"user_contact"                        => "Share your contact with me in order to book tools",
		"user_share_contact"                  => "‚úÖ Share contact",
		"user_invalid_contact"                => "This is not information I need, try again, please",
		"user_begin"                          => "OK, let's begin üëå",
		"user_select_resource"                => "‚ö† Select tool for booking",
		"user_resource_not_found"             => "I can't found free tools for now, sorry. Try again later",
		"user_invalid_resource"               => "This is not information I need, try again, please",
		"user_select_duration"                => "üïí OK, how long will you use the tool?",
		"user_duration_not_found"             => "I can't found free vacancies for this tool, sorry. Try again later",
		"user_invalid_duration"               => "This is not information I need, try again, please",
		"user_select_datetime"                => "üìÜ OK, select convenient time",
		"user_invalid_datetime"               => "This is not information I need, try again, please",
		"user_instructor_not_found"           => "I can't found instructor for you (looks like this time has been booked already). Select another time, please",
		"user_booked"                         => "OK, done. I have booked %s for you at %s",
		"user_instructor_contact"             => "Here is your instructor contact:",
		"user_press_refresh_button"           => "Press the button to refresh data",
		"user_refresh"                        => "‚¨ÖÔ∏è Refresh",

		"instructor_start"                    => "Hello! I am booking bot",
		"instructor_menu"                     => "What can I do for you?",
		"instructor_show_schedule"            => "üìí Show my schedule",
		"instructor_add_record"               => "‚ûï New record",
		"instructor_schedule"                 => "OK, I'm going to send you the schedule in a moment",
		"instructor_schedule_is_empty"        => "No records found in your schedule",
		"instructor_remove_record"            => "‚ôªÔ∏è You can remove free record by pressing correspond button",
		"instructor_record_removed"           => "‚úÖ Record has been removed",
		"instructor_busy"                     => "Busy",
		"instructor_free"                     => "Free",
		"instructor_resource_not_found"       => "No available resources found, sorry. It looks like a bug, inform my admin, please",
		"instructor_select_resource"          => "Select resource that you'll operate",
		"instructor_enter_time"               => "Enter time when you're available",
		"instructor_invalid_time"             => "I didn't understand, sorry, try again, please",
		"instructor_record_saved"             => "OK, record(s) saved",
		"instructor_new_book"                 => "Hi! I have received new book record for you, here is what I have:\nResource: %s\nBooked from %s to %s\nI will send you the user contact in a moment\nYour contact has been sent to the user already\nHave a nice day! üòä",

		"group_new_book"                      => "Hi guys! I have received new book record for instructor %s (%s), here is what I have:\nResource: %s\nBooked from %s to %s\nI will post here the user contact in a moment\nThe instructor's contact has been sent to the user already\nHave a nice day! üòä",
		"group_new_book_fallback"             => "Hi guys! I have received new book record, here is what I have:\nResource: %s\nBooked from %s to %s\nI will post here the user contact in a moment\nHave a nice day! üòä",
	},

	"Russian" => {
		"na"                                  => "–ù/–î",

		"today"                               => "—Å–µ–≥–æ–¥–Ω—è",
		"tomorrow"                            => "–∑–∞–≤—Ç—Ä–∞",

		"monday_re"                           => qr/(?:–ø–Ω)|(?:–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫)/i,
		"tuesday_re"                          => qr/(?:–≤—Ç)|(?:–≤—Ç–æ—Ä–Ω–∏–∫)/i,
		"wednesday_re"                        => qr/(?:—Å—Ä)|(?:—Å—Ä–µ–¥(?:–∞|—É))/i,
		"thursday_re"                         => qr/(?:—á—Ç)|(?:—á–µ—Ç–≤–µ—Ä–≥)/i,
		"friday_re"                           => qr/(?:–ø—Ç)|(?:–ø—è—Ç–Ω–∏—Ü(?:–∞|—É))/i,
		"saturday_re"                         => qr/(?:—Å–±)|(?:—Å—É–±–±–æ—Ç(?:–∞|—É))/i,
		"sunday_re"                           => qr/(?:–≤—Å)|(?:–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)/i,
		
		"at_re"                               => qr/–≤/i,
		"until_re"                            => qr/–¥–æ/i,

		"30_min"                              => "30 –º–∏–Ω—É—Ç",
		"1_hour"                              => "1 —á–∞—Å",
		"2_hours"                             => "2 —á–∞—Å–∞",
		"3_hours"                             => "3 —á–∞—Å–∞",

		"booked_by"                           => "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–ª %s",

		"back"                                => "‚¨ÖÔ∏è –ù–∞–∑–∞–¥",
		"cancel"                              => "‚ùå –û—Ç–º–µ–Ω–∞",
		"operation_cancelled"                 => "‚ùå –û–ø–µ—Ä–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞",

		"user_start"                          => "–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è",
		"user_contact"                        => "–ü—Ä–∏—à–ª–∏ –º–Ω–µ —Å–≤–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é",
		"user_share_contact"                  => "‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç—ã",
		"user_invalid_contact"                => "–≠—Ç–æ –Ω–µ —Ç–æ, —á—Ç–æ –º–Ω–µ –Ω—É–∂–Ω–æ, –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑",
		"user_begin"                          => "OK, –ø—Ä–∏—Å—Ç—É–ø–∏–º üëå",
		"user_select_resource"                => "‚ö† –í—ã–±–µ—Ä–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è",
		"user_resource_not_found"             => "–Ø –Ω–µ –Ω–∞—à—ë–ª —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç, –∏–∑–≤–∏–Ω–∏. –ü–æ–ø—Ä–æ–±—É–π –ø–æ–∑–∂–µ",
		"user_invalid_resource"               => "–≠—Ç–æ –Ω–µ —Ç–æ, —á—Ç–æ –º–Ω–µ –Ω—É–∂–Ω–æ, –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑",
		"user_select_duration"                => "üïí –°–∫–æ–ª—å–∫–æ –±—É–¥–µ—à—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º?",
		"user_duration_not_found"             => "–Ø –Ω–µ –Ω–∞—à—ë–ª —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è, –∏–∑–≤–∏–Ω–∏. –ü–æ–ø—Ä–æ–±—É–π –ø–æ–∑–∂–µ",
		"user_invalid_duration"               => "–≠—Ç–æ –Ω–µ —Ç–æ, —á—Ç–æ –º–Ω–µ –Ω—É–∂–Ω–æ, –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑",
		"user_select_datetime"                => "üìÜ –í—ã–±–µ—Ä–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è",
		"user_invalid_datetime"               => "–≠—Ç–æ –Ω–µ —Ç–æ, —á—Ç–æ –º–Ω–µ –Ω—É–∂–Ω–æ, –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑",
		"user_instructor_not_found"           => "–Ø –Ω–µ —Å–º–æ–≥ –Ω–∞–π—Ç–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –¥–ª—è —Ç–µ–±—è (–≤–æ–∑–º–æ–∂–Ω–æ, –≤—ã–±—Ä–∞–Ω–Ω–æ–µ —Ç–æ–±–æ–π –≤—Ä–µ–º—è —É–∂–µ –∑–∞–Ω—è–ª–∏). –í—ã–±–µ—Ä–∏ –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞",
		"user_booked"                         => "–û—Ç–ª–∏—á–Ω–æ, —è –∑–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–ª –¥–ª—è —Ç–µ–±—è %s –Ω–∞ –¥–∞—Ç—É %s",
		"user_instructor_contact"             => "–í–æ—Ç –∫–æ–Ω—Ç–∞–∫—Ç —Ç–≤–æ–µ–≥–æ –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞:",
		"user_press_refresh_button"           => "–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É —á—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é",
		"user_refresh"                        => "‚¨ÖÔ∏è –û–±–Ω–æ–≤–∏—Ç—å",

		"instructor_start"                    => "–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è",
		"instructor_menu"                     => "–ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?",
		"instructor_show_schedule"            => "üìí –ú–æ—ë —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ",
		"instructor_add_record"               => "‚ûï –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å",
		"instructor_schedule"                 => "OK, —Å–µ–π—á–∞—Å –ø—Ä–∏—à–ª—é",
		"instructor_schedule_is_empty"        => "–í —Ç–≤–æ—ë–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π",
		"instructor_remove_record"            => "‚ôªÔ∏è –¢—ã –º–æ–∂–µ—à—å —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–±–æ–¥–Ω—É—é –∑–∞–ø–∏—Å—å –Ω–∞–∂–∞–≤ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∫–Ω–æ–ø–∫—É",
		"instructor_record_removed"           => "‚úÖ –ó–∞–ø–∏—Å—å —É–¥–∞–ª–µ–Ω–∞",
		"instructor_busy"                     => "–ó–∞–Ω—è—Ç–æ",
		"instructor_free"                     => "–°–≤–æ–±–æ–¥–Ω–æ",
		"instructor_resource_not_found"       => "–ù–µ –Ω–∞–π–¥–µ–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ. –≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—É—é –æ—à–∏–±–∫—É, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–æ–±—â–∏—Ç–µ –º–æ–µ–º—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É",
		"instructor_select_resource"          => "–í—ã–±–µ—Ä–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ —Å –∫–æ—Ç–æ—Ä—ã–º –±—É–¥–µ—à—å —Ä–∞–±–æ—Ç–∞—Ç—å",
		"instructor_enter_time"               => "–í–≤–µ–¥–∏ –≤—Ä–µ–º—è, –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —Ç—ã –≥–æ—Ç–æ–≤ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞—è–≤–∫–∏",
		"instructor_invalid_time"             => "–≠—Ç–æ —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–æ –¥–ª—è –º–µ–Ω—è, –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑",
		"instructor_record_saved"             => "OK, –¥–æ–±–∞–≤–∏–ª –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ",
		"instructor_new_book"                 => "–ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–ª—É—á–∏–ª –Ω–æ–≤—É—é –∑–∞—è–≤–∫—É –Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–≤–æ–µ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è. –í–æ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è —É –º–µ–Ω—è –µ—Å—Ç—å:\n–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ: %s\n–í—Ä–µ–º—è –±—Ä–æ–Ω–∏: —Å %s –¥–æ %s\n–°–µ–π—á–∞—Å —è –ø—Ä–∏—à–ª—é –∫–æ–Ω—Ç–∞–∫—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞\n–¢–≤–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã\n–•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è! üòä",

		"group_new_book"                      => "–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç! –Ø –ø–æ–ª—É—á–∏–ª –Ω–æ–≤—É—é –∑–∞—è–≤–∫—É –Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ %s (%s). –í–æ—Ç —á—Ç–æ —è —É–∑–Ω–∞–ª:\n–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ: %s\n–í—Ä–µ–º—è –±—Ä–æ–Ω–∏: —Å %s –¥–æ %s\n–°–µ–π—á–∞—Å —è –ø—Ä–∏—à–ª—é –∫–æ–Ω—Ç–∞–∫—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞\n–ö–æ–Ω—Ç–∞–∫—Ç—ã –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–ª–∏–µ–Ω—Ç—É\n–í—Å–µ–º —Ö–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è! üòä",
		"group_new_book_fallback"             => "–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç! –Ø –ø–æ–ª—É—á–∏–ª –Ω–æ–≤—É—é –∑–∞—è–≤–∫—É –Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ. –í–æ—Ç —á—Ç–æ —è —É–∑–Ω–∞–ª:\n–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ: %s\n–í—Ä–µ–º—è –±—Ä–æ–Ω–∏: —Å %s –¥–æ %s\n–°–µ–π—á–∞—Å —è –ø—Ä–∏—à–ª—é –∫–æ–Ω—Ç–∞–∫—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞\n–í—Å–µ–º —Ö–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è! üòä",
	},
);

sub languages {
	my @result = keys %strings;
	\@result;
}

my $fallback = "English";
my $language = $fallback;

sub set_language {
	my ($new_language) = @_;

	my $languages_ = languages;
	my $result = defined $new_language and
		grep { $_ eq $new_language } @$languages_;
	if ($result) {
		$language = $new_language;
	}

	$result;
}

sub lz {
	my ($key, @params) = @_;

	sub _keys {
		my ($language) = @_;
		my @result = keys %{$strings{$language}};
		\@result;
	};

	if (grep { $_ eq $key } keys %{$strings{$language}}) {
		sprintf($strings{$language}{$key}, @params);
	} elsif (grep { $_ eq $key } keys %{$strings{$fallback}}) {
		sprintf($strings{$fallback}{$key}, @params);
	} else {
		$key;
	}
}

sub dt {
	my ($datetime) = @_;
	$datetime->strftime(lz("datetime_format"));
}

our @EXPORT_OK = ("lz", "dt");

1;
